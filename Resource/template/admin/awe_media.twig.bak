{% form_theme form '@admin/Form/bootstrap_4_horizontal_layout.html.twig' %}
<html lang="{{ eccube_config.locale }}">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="eccube-csrf-token" content="{{ csrf_token(constant('Eccube\\Common\\Constant::TOKEN_NAME')) }}">
    <title>AWE</title>
    <link rel="icon" href="{{ asset('assets/img/favicon.ico', 'admin') }}">
    <link rel="stylesheet" href="{{ asset('assets/css/bootstrap.css', 'admin') }}">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/v4-shims.css">
    <link rel="stylesheet" href="{{ asset('assets/css/ladda-themeless.min.css', 'admin') }}"></link>
    <link rel="stylesheet" href="{{ asset('assets/css/app.css', 'admin') }}">

    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script>
        $(function() {
            $.ajaxSetup({
                'headers': {
                    'ECCUBE-CSRF-TOKEN': $('meta[name="eccube-csrf-token"]').attr('content')
                }
            });
        });
    </script>
    <style>
        .copy-file-path {
            display: none;
        }
    </style>
</head>
<body id="page_{{ app.request.get('_route') }}">

    <form name="form1" id="form1" method="post" action="?" enctype="multipart/form-data" style="background: #eff0f4;">
        <input type="hidden" name="mode" value=""/>
        <input type="hidden" name="now_file" value="{{ tpl_now_dir }}"/>
        <input type="hidden" name="now_dir" value="{{ tpl_now_dir }}"/>
        <input type="hidden" name="tree_select_file" value="{{ tpl_now_dir }}"/>
        <input type="hidden" name="tree_status" value=""/>
        <input type="hidden" name="select_file" value=""/>
        {{ form_widget(form._token) }}
        <div class="c-outsideBlock">
            <div class="c-outsideBlock__contents">
                <nav aria-label="breadcrumb" role="navigation">
                    <ol class="breadcrumb mb-2 p-0" id="bread"></ol>
                </nav>
                <div class="card rounded border-0 mb-4">
                    <div class="card-body">
                        <div id="upload_box__file" class="row mb-2">
                            <div class="col-2" ><span>{{ 'admin.content.file.add_file'|trans }}</span></div>
                            <div class="col mb-3">
                                <div class="mb-2">
                                    {{ form_widget(form.file) }}{# TODO input type="file" の装飾 #}
                                </div>
                                <div class="mb-2">
                                    <a class="btn btn-ec-conversion action-upload" href="javascript:;" onclick="eccube.fileManager.setTreeStatus('tree_status');eccube.setModeAndSubmit('upload','',''); return false;">{{ 'admin.common.upload'|trans }}</a>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-2">
                            <div class="col-2"><span>{{ 'admin.content.file.add_directory'|trans }}</span></div>
                            <div class="col">
                                <div class="form-row">
                                    <div class="col-3">
                                        {{ form_widget(form.create_file, {attr: {placeholder: 'admin.content.file.directory_name'}}) }}
                                    </div>
                                    <div class="col-auto">
                                        <a class="btn btn-ec-regular action-create" href="javascript:" onclick="eccube.fileManager.setTreeStatus('tree_status');eccube.setModeAndSubmit('create','',''); return false;">{{ 'admin.common.create__new'|trans }}</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% for error in errors %}
                            <p class="text-danger errormsg">{{ error.message|trans }}</p>
                        {% endfor %}
                    </div>
                </div>
            </div>
            
            <div class="c-contentsArea__cols">

                <div class="c-contentsArea__primaryCol">
                    <div class="c-primaryCol">
                        <div class="card rounded border-0 mb-4">
                            <div class="card-header">
                                <div class="row">
                                    <div class="col-8"><span class="card-title">{{ 'admin.content.file.file_list__card_title'|trans }}</span></div>
                                    <div class="col-4 text-right"><a data-toggle="collapse" href="#fileList" aria-expanded="false" aria-controls="fileList"><i class="fa fa-angle-up fa-lg"></i></a></div>
                                </div>
                            </div>
                            <div class="collapse show ec-cardCollapse" id="fileList">
                                <div class="card-body p-0">

                                    <table class="table">
                                        <tbody>
                                        {% if tpl_is_top_dir == false %}
                                            <tr>
                                                <td class="align-middle text-center" style="width: 10%"><i class="fa fa-folder-o fa-2x"></i></td>
                                                <td class="align-middle">
                                                <span class="js-action-dir-open" data-path="{{ tpl_parent_dir }}"><i class="fa fa-reply"></i></span>
                                                {# <a href="javascript:;" onclick="eccube.fileManager.openFolder('{{ tpl_parent_dir }}')"></a> #}
                                                </td>
                                                <td class="align-middle">&nbsp;</td>
                                                <td class="align-middle">&nbsp;</td>
                                            </tr>
                                        {% endif %}
                                        {% for file in arrFileList %}
                                            <tr id="{{ loop.index }}">
                                                <td class="align-middle text-center">
                                                    {% if file.is_dir %}
                                                        <i class="fa fa-folder-o fa-2x"></i>
                                                    {% else %}
                                                        {% if file.extension|file_ext_icon({}, true) == 'fa-file-image-o' %}
                                                            <div class="d-inline-block p-3 bg-light"
                                                                 style="background: no-repeat center center;
                                                                    background-image: url('{{ asset('', 'user_data') }}{{ file.file_path|slice(1) }}');
                                                                    background-size: contain; width: 49px; height: 57px;">
                                                            </div>
                                                        {% else %}
                                                            <div class="d-inline-block p-3 bg-light">
                                                                {{ file.extension|file_ext_icon({class: "fa-2x"}) }}
                                                            </div>
                                                        {% endif %}
                                                    {% endif %}
                                                </td>
                                                <td class="align-middle">
                                                    {% if file.is_dir %}
                                                        <span class="js-action-dir-open" data-path="{{ file.file_path }}">{{ file.file_name }}</span>
                                                    {% else %}
                                                        {{ file.file_name }}（{{ file.file_size }}）
                                                    {% endif %}
                                                </td>

                                                <td class="align-middle">
                                                    {% if file.is_dir == false %}
                                                        {# <span class="copy-file-path"><input type="text"  class="form-control" value="{{asset('', 'user_data')}}{{ file.file_path|slice(1) }}"></span> #}
                                                    {% endif %}
                                                </td>
                                                {% if file.is_dir %}
                                                    <td class="align-middle pr-3">
                                                        <div class="text-right">


                                                        </div>
                                                    </td>
                                                {% else %}
                                                    <td class="align-middle pr-3">
                                                        <div class="text-right">

                                                            <div class="px-1 d-inline-block">
                                                                <span class="btn btn-ec-actionIcon js-action-insert" data-url="{{asset('', 'user_data')}}{{ file.file_path|slice(1) }}" >
                                                                    <i class="fas fa-paperclip fa-lg text-secondary" aria-hidden="true"></i>
                                                                </span>
                                                            </div>
                                                            
                                                        </div>
                                                    </td>
                                                {% endif %}
                                            </tr>
                                        {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </form>

{# <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="{{ asset('assets/js/vendor/spin.min.js', 'admin') }}"></script>
<script src="{{ asset('assets/js/vendor/ladda.min.js', 'admin') }}"></script>
{% include('@common/lang.twig') %}
<script src="{{ asset('assets/js/function.js', 'admin') }}"></script> #}



</body>
</html>
